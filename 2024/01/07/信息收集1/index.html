<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>信息收集 | Sasuki</title><meta name="author" content="Ys1"><meta name="copyright" content="Ys1"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="此篇介绍了信息收集的基本操作，资产架构、番外安全、收集阻碍、内网web服务器。信息打点，弄清楚web架构，源码的类型、有没有泄露源码、查找域名。查找资产泄露。cdn绕过寻找真实ip,">
<meta property="og:type" content="article">
<meta property="og:title" content="信息收集">
<meta property="og:url" content="http://example.com/2024/01/07/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%861/index.html">
<meta property="og:site_name" content="Sasuki">
<meta property="og:description" content="此篇介绍了信息收集的基本操作，资产架构、番外安全、收集阻碍、内网web服务器。信息打点，弄清楚web架构，源码的类型、有没有泄露源码、查找域名。查找资产泄露。cdn绕过寻找真实ip,">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/wallhaven-exrvrl_3840x2160-17046999802731.png">
<meta property="article:published_time" content="2024-01-07T13:49:53.000Z">
<meta property="article:modified_time" content="2024-01-08T08:26:17.412Z">
<meta property="article:author" content="Ys1">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/wallhaven-exrvrl_3840x2160-17046999802731.png"><link rel="shortcut icon" href="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/IMG_4127.jpg"><link rel="canonical" href="http://example.com/2024/01/07/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%861/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '信息收集',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-08 16:26:17'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu@1.1.6/lib/clock.min.css" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/IMG_3964.PNG" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 文档</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友联</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 娱乐</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/wallhaven-exrvrl_3840x2160-17046999802731.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Sasuki"><span class="site-name">Sasuki</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 文档</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友联</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 娱乐</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">信息收集</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-01-07T13:49:53.000Z" title="Created 2024-01-07 21:49:53">2024-01-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-01-08T08:26:17.412Z" title="Updated 2024-01-08 16:26:17">2024-01-08</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="信息收集"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>此篇介绍了信息收集的基本操作，资产架构、番外安全、收集阻碍、内网web服务器。信息打点，弄清楚web架构，源码的类型、有没有泄露源码、查找域名。查找资产泄露。cdn绕过寻找真实ip,</p>
<span id="more"></span>

<h1 id="信息收集基本信息"><a href="#信息收集基本信息" class="headerlink" title="信息收集基本信息"></a>信息收集基本信息</h1><h2 id="资产架构"><a href="#资产架构" class="headerlink" title="资产架构"></a>资产架构</h2><h3 id="web单个源码指向安全"><a href="#web单个源码指向安全" class="headerlink" title="web单个源码指向安全"></a>web单个源码指向安全</h3><p>只有一个目录，没有其他的目录</p>
<h3 id="web多个目录源码安全"><a href="#web多个目录源码安全" class="headerlink" title="web多个目录源码安全"></a>web多个目录源码安全</h3><p>bbs.example.com  dz论坛</p>
<p>bbs.example.com&#x2F;bolg  wp程序</p>
<p>一个网站两个程序 任何一个程序出现漏洞都可以安全测试</p>
<h3 id="web多个端口源码安全"><a href="#web多个端口源码安全" class="headerlink" title="web多个端口源码安全"></a>web多个端口源码安全</h3><p>bbs.example.com   dz论坛</p>
<p>bbs.example.com :8080 zblog程序</p>
<h3 id="服务器架设多个站点安全"><a href="#服务器架设多个站点安全" class="headerlink" title="服务器架设多个站点安全"></a>服务器架设多个站点安全</h3><p>bbs.example.com   47.242.117.23</p>
<p>bbs.example.com  47.242.117.23</p>
<p>给到你的目标bbs.example.com  尝试对服务下edu.example.com 进行安全测试</p>
<h3 id="架设第三方插件接口安全"><a href="#架设第三方插件接口安全" class="headerlink" title="架设第三方插件接口安全"></a>架设第三方插件接口安全</h3><p><code>WordPress</code>插件<code>file-maneage</code>r漏洞复现</p>
<p>web源码插件</p>
<p>web应用插件：<code>phpadmin</code>插件，便于数据管理的 方便了管理人员管理数据库 直接访问地址就能直接访问</p>
<p>也方便了攻击者进行攻击数据库的方式。有些数据库，限制了ip,只允许本机登录。当时<code>phpadmin</code>就可以在其他ip登录。</p>
<h3 id="服务器架设多个应用安全"><a href="#服务器架设多个应用安全" class="headerlink" title="服务器架设多个应用安全"></a>服务器架设多个应用安全</h3><p>服务器应用ftp,方便管理人员进行文件操作，也方便了攻击者进行哦攻击ftp协议服务</p>
<p><strong>安装的越多，攻击者的目标越多</strong></p>
<h2 id="番外安全"><a href="#番外安全" class="headerlink" title="番外安全"></a>番外安全</h2><p><strong>属于社会工程学的类别</strong></p>
<h3 id="基于域名解析安全"><a href="#基于域名解析安全" class="headerlink" title="基于域名解析安全"></a>基于域名解析安全</h3><p>大部分网站都有域名，域名和服务器购买的地方有可能不在一个地方。</p>
<p>如果知道购买的厂商，可以尝试去在厂商破解，在社会工程学上可以去查询</p>
<p>猜测密码或者找回密码，可以修改域名</p>
<h3 id="基于服务器本身安全"><a href="#基于服务器本身安全" class="headerlink" title="基于服务器本身安全"></a>基于服务器本身安全</h3><p>都是属于是本身的问题</p>
<h3 id="基于服务商信息安全"><a href="#基于服务商信息安全" class="headerlink" title="基于服务商信息安全"></a>基于服务商信息安全</h3><h3 id="基于管理个人的安全"><a href="#基于管理个人的安全" class="headerlink" title="基于管理个人的安全"></a>基于管理个人的安全</h3><p>点对点的攻击，就是搞个人</p>
<h2 id="考虑阻碍"><a href="#考虑阻碍" class="headerlink" title="考虑阻碍"></a>考虑阻碍</h2><h3 id="阻碍-站库分离"><a href="#阻碍-站库分离" class="headerlink" title="阻碍-站库分离"></a>阻碍-站库分离</h3><p>源码和数据库不在一个IP地址，网站会调用远程的数据库</p>
<p>导致攻击的时候，获取的东西得不到</p>
<h3 id="阻碍-CDN加速服务"><a href="#阻碍-CDN加速服务" class="headerlink" title="阻碍-CDN加速服务"></a>阻碍-CDN加速服务</h3><p>cdn节点，属于科学上网的方式</p>
<p>网站会调用最近的节点，是一种缓存，解决网络通讯的速度稳定</p>
<p>在网络上看到的是缓存，攻击的也是缓存，要找到真实IP</p>
<h3 id="阻碍-负载均衡服务"><a href="#阻碍-负载均衡服务" class="headerlink" title="阻碍-负载均衡服务"></a>阻碍-负载均衡服务</h3><p>备用机，多台服务器，预防服务器奔溃</p>
<p>如果攻击备用机，拿到的也是备用机。最好的情况是拿到主机，主服务。</p>
<h3 id="阻碍-WAF应用防火墙"><a href="#阻碍-WAF应用防火墙" class="headerlink" title="阻碍-WAF应用防火墙"></a>阻碍-WAF应用防火墙</h3><p>网站应用防火墙  ，IIS网站防火墙，Nginx网站防火墙，Apache网站防火墙</p>
<p>防止漏洞攻击，安装之后有些攻击就会被阻止掉</p>
<h3 id="阻碍-主机防护防火墙"><a href="#阻碍-主机防护防火墙" class="headerlink" title="阻碍-主机防护防火墙"></a>阻碍-主机防护防火墙</h3><p>杀毒软件</p>
<p>不会直接拦截网站上的攻击，假如网站入侵成功了，而且拿到了权限，但是下一步要拿服务器的权限，服务器的防护软件就会组织。</p>
<p><strong>就是绕过这些东西，需要一些条件，也不是都能过绕过</strong></p>
<h2 id="内网web服务器"><a href="#内网web服务器" class="headerlink" title="内网web服务器"></a>内网web服务器</h2><p>从您的描述中，可以理解您在进行内网安全测试。以下是针对内网服务器原理和您描述的情况的解释：</p>
<h3 id="内网服务器原理"><a href="#内网服务器原理" class="headerlink" title="内网服务器原理"></a>内网服务器原理</h3><ul>
<li><p><strong>内网服务器</strong>：通常在局域网中运行，使用私有IP地址（例如，192.168.x.x，10.x.x.x等）。这些服务器通过路由器或防火墙连接到公共互联网。</p>
</li>
<li><p><strong>外网映射反向代理</strong>：可以通过配置防火墙或路由器来实现外部请求的转发或反向代理。这将公共IP地址与内部服务器关联，允许外部访问内部服务器。</p>
</li>
<li><p><strong>安全测试需求</strong>：您可能要在内部网络中进行安全测试，以模拟外部攻击。您希望从外部扫描和测试内网服务器，以检测可能存在的安全漏洞。</p>
</li>
</ul>
<h3 id="用于安全测试的方法"><a href="#用于安全测试的方法" class="headerlink" title="用于安全测试的方法"></a>用于安全测试的方法</h3><ul>
<li><p><strong>扫描探针信息</strong>：使用扫描工具（如端口扫描器）对内网IP范围进行探测，寻找可访问的服务和漏洞。</p>
</li>
<li><p><strong>目标与网段</strong>：目标是在网段 171.40.78.1-255 中发现内网中的服务。已经发现了内网中的一个主机（171.40.78.99）。</p>
</li>
<li><p><strong>内网攻击安全测试手段</strong>：对于类似学校或企业内部网络，出口IP与内部服务器的真实IP不同。这可能导致扫描到的地址（171.40.78.83）与实际内部服务器地址不匹配。</p>
</li>
</ul>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul>
<li><strong>内网地址映射</strong>：由于内网服务器被映射到公共IP，扫描结果可能显示出不准确或误报。真实服务器地址可能不可见。</li>
<li><strong>内部网络安全限制</strong>：学校或企业内部网络可能设置了防火墙、入侵检测系统等安全措施，可能会阻止或限制对内部服务器的扫描和测试。</li>
</ul>
<h3 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h3><p><strong>192.168.1.100内网多个代理</strong></p>
<p><strong>202.103.25.102 内网主机的外网出口</strong></p>
<p><strong>能够解析202.103.25.102 但是解析不到192.168.1.100</strong></p>
<p><strong>外网主机  101.3.13.45</strong></p>
<p><strong>192.168.1.100 将web请求解析到101.3.13.45</strong></p>
<p><strong>DNS域名101.3.13.45</strong></p>
<h1 id="信息打点"><a href="#信息打点" class="headerlink" title="信息打点"></a>信息打点</h1><h2 id="web架构-语言-中间件-数据库-系统等"><a href="#web架构-语言-中间件-数据库-系统等" class="headerlink" title="web架构-语言&amp;中间件&amp;数据库&amp;系统等"></a>web架构-语言&amp;中间件&amp;数据库&amp;系统等</h2><ul>
<li><strong>Web架构</strong>：包括语言、中间件、数据库和操作系统。</li>
<li><strong>操作系统</strong>：Windows和Linux的判断与识别。</li>
<li><strong>开发语言</strong>：ASP&#x2F;ASPX、PHP、Java、Python、JavaScript等。</li>
<li><strong>程序源码</strong>：CMS、框架等源码类型。</li>
<li><strong>中间件容器</strong>：IIS、Apache、Nginx、Tomcat、Weblogic、Jboss等。</li>
<li><strong>数据库</strong>：MySQL、MSSQL、Oracle、Access、DB2、Sybase、Redis、MongoDB等。</li>
<li><strong>第三方软件</strong>：phpMyAdmin、vs-ftpd、VNC、ELK、OpenSSH等。</li>
<li><strong>漏洞</strong>：SQL注入、文件安全、RCE执行、XSS跨站、CSRF&#x2F;SSRF&#x2F;CRLF、反序列化、逻辑越权、未授权访问、XXE&#x2F;XML、弱口令安全等。</li>
</ul>
<h2 id="收集信息后的判断"><a href="#收集信息后的判断" class="headerlink" title="收集信息后的判断"></a>收集信息后的判断</h2><p>通过网站的连接打开检查源代码，network抓包，去检查类似的文件</p>
<p>在Response Header中可以看到:  x-powered-by,server,product，都可以去检查看看</p>
<ul>
<li><p><strong>判断语言</strong>：通过源代码、Header信息、连接和抓包等方式。</p>
</li>
<li><p><strong>判断操作系统</strong>：根据ID参数、后缀修改、TTL值、ping命令等方式。</p>
<blockquote>
<p><img src="https://raw.githubusercontent.com/Liuxunzhang/tuchuang/main/lxz/202401072106938.png"><img src="https://raw.githubusercontent.com/Liuxunzhang/tuchuang/main/lxz/202401072106797.png">这个id属于参数</p>
<p>改成这样，如果页面没有变化，就是Windows系统，Windows大小写不冲突</p>
<p><img src="https://raw.githubusercontent.com/Liuxunzhang/tuchuang/main/lxz/202401072106252.png"><img src="https://raw.githubusercontent.com/Liuxunzhang/tuchuang/main/lxz/202401072106199.png"></p>
<p>一般在后缀上面改，改完之后，Windows应该不会改变</p>
<p>ping 后面的ttl值也可以判断</p>
<p>linux系统的ttl值是64或者为55</p>
<p>Windows NT&#x2F;2000&#x2F;XP系统的TTL值为128</p>
<p>windows 98系统的TTL值为32</p>
<p>Unix主机的TTL值为255</p>
<p>一般来说，离那个值越近就是哪个系统</p>
</blockquote>
</li>
<li><p><strong>判断数据库与中间件</strong>：扫描端口、搭建组合、组合扫描、网上搜寻等方法。</p>
<blockquote>
<p>搭建组合或者端口扫面</p>
<p>可以去网上搜，比如：PHP与上面数据库最搭配，网上一般有最优答案</p>
<p>access mysql3306 mssql1433 redis6379 mongodb27017 oracle1521 postreqsl</p>
<p>开启服务会开启一个端口</p>
<p>可以用端口扫描，扫描数据库开启端口</p>
</blockquote>
</li>
</ul>
<h2 id="Web源码类型的获取与特征"><a href="#Web源码类型的获取与特征" class="headerlink" title="Web源码类型的获取与特征"></a>Web源码类型的获取与特征</h2><ul>
<li><strong>CMS开源</strong>：公开的源码，可通过网上搜索获得。</li>
<li><strong>闭源售卖</strong>：源码被加密，作为内部工具出售。</li>
<li><strong>自主研发</strong>：个人或公司自行研发的源码，难以获取。</li>
</ul>
<h2 id="Web源码获取、泄露与监控"><a href="#Web源码获取、泄露与监控" class="headerlink" title="Web源码获取、泄露与监控"></a>Web源码获取、泄露与监控</h2><ul>
<li><strong>安全测试</strong>：利用公开的漏洞库进行安全测试。</li>
<li><strong>白盒代码审计</strong>：对源码进行审计，寻找漏洞。</li>
<li><strong>MySQL漏洞和弱口令</strong>：利用漏洞或弱密码获取源码信息。</li>
</ul>
<h2 id="Web域名的分析"><a href="#Web域名的分析" class="headerlink" title="Web域名的分析"></a>Web域名的分析</h2><ul>
<li><p><strong>子域名、相似域名与反查域名</strong>：变动资源名、域名后缀等分析方法。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.jmlsd.com/">www.jmlsd.com</a></p>
<p><a target="_blank" rel="noopener" href="http://www.jmlsd.cn/">www.jmlsd.cn</a></p>
<p>资源名变www</p>
<p>变动jmlsd jmlsd 123 8</p>
<p>变动com net cn org</p>
</blockquote>
</li>
</ul>
<h2 id="信息点和技术点"><a href="#信息点和技术点" class="headerlink" title="信息点和技术点"></a>信息点和技术点</h2><ul>
<li><strong>信息点</strong>：系统信息、应用信息、防护信息、人员信息、其他信息等收集点。</li>
<li><strong>技术点</strong>：CMS技术、端口扫描、CDN绕过、源码获取、子域名查询、WAF识别、负载均衡识别等技术手段。</li>
</ul>
<h1 id="资产泄露"><a href="#资产泄露" class="headerlink" title="资产泄露"></a>资产泄露</h1><p>根据您提供的信息，您想要获取CMS识别信息，并提到了一些安全问题和泄露情况。这里是一些建议和步骤来优化和解决这些问题：</p>
<h2 id="CMS识别"><a href="#CMS识别" class="headerlink" title="CMS识别"></a><strong>CMS识别</strong></h2><ul>
<li>访问<a target="_blank" rel="noopener" href="https://www.yunsee.cn/">云悉指纹识别平台</a>以获取CMS识别信息。</li>
<li>如果您已经有账户，直接登录并使用平台的服务来识别CMS。</li>
<li>如果您没有账户，您可能需要注册一个账户才能使用服务。</li>
</ul>
<h2 id="备份文件泄露"><a href="#备份文件泄露" class="headerlink" title="备份文件泄露"></a><strong>备份文件泄露</strong></h2><ul>
<li><p>不要在Web根目录下存放备份文件，如<code>www.rar</code>或<code>www.zip</code>。这使得备份文件可能通过子域名直接访问和下载。</p>
</li>
<li><blockquote>
<p>\wwwroot\<a target="_blank" rel="noopener" href="http://www.xiaodi8.com/">www.xiaodi8.com</a> 备份</p>
<p>c:\wwwroot\<a target="_blank" rel="noopener" href="http://www.xiaodi8.com/www.rar">www.xiaodi8.com\www.rar</a> <a target="_blank" rel="noopener" href="http://www.zip/">www.zip</a> 等  别人可以直接从子域名后面进入下载</p>
<p>c:\wwwroot\</p>
<p>c:\wwwroot\<a target="_blank" rel="noopener" href="http://www.rar/">www.rar</a> 在这里备份的话只能从ip地址访问</p>
</blockquote>
</li>
<li><p>应该将备份文件存储在非公开访问的目录中，并确保通过安全的文件传输协议传输这些文件。</p>
</li>
</ul>
<h2 id="GIT泄露"><a href="#GIT泄露" class="headerlink" title="GIT泄露"></a><strong>GIT泄露</strong></h2><p>git init 在初始化目录的时候，会在当前目录自动创建一个.git目录，用来记录代码的变更记录，发布代码的时候如果没有把git给删除，就直接发布在服务器上面，攻击者就是可以通过他来恢复源码</p>
<ul>
<li><p>在部署到生产环境之前，确保删除<code>.git</code>目录以避免源代码泄露。</p>
</li>
<li><p>可以使用<code>GitHack</code>工具来检测和修复GIT泄露问题，使用方法如下：</p>
<p>github项目地址：<a target="_blank" rel="noopener" href="https://github.com/lijielijie/GubHack">https://github.com/lijielijie/GubHack</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GitHack.py http://www.example.com/.git/</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="SVN泄露"><a href="#SVN泄露" class="headerlink" title="SVN泄露"></a><strong>SVN泄露</strong></h2><ul>
<li>类似于GIT泄露，确保在生产环境中不公开<code>.svn</code>目录。</li>
<li>和上面的案例差不多，都可以通过Git Hack直接下载</li>
</ul>
<h2 id="DS-store泄露"><a href="#DS-store泄露" class="headerlink" title="DS_store泄露:"></a><strong>DS_store泄露</strong>:</h2><ul>
<li>对于使用Mac系统的开发人员，不要在服务器上保留<code>.DS_Store</code>文件，这可能泄露文件结构信息。</li>
</ul>
<h2 id="composer-json泄露"><a href="#composer-json泄露" class="headerlink" title="composer.json泄露:"></a><strong>composer.json泄露</strong>:</h2><ul>
<li>对于使用Composer的PHP项目，确保<code>composer.json</code>不在公开可访问的目录中。</li>
</ul>
<h2 id="WEB-INF泄露"><a href="#WEB-INF泄露" class="headerlink" title="WEB-INF泄露:"></a><strong>WEB-INF泄露</strong>:</h2><ul>
<li>确保Java Web应用的<code>WEB-INF</code>目录不可直接通过Web访问。</li>
</ul>
<h2 id="GitHub泄露监控"><a href="#GitHub泄露监控" class="headerlink" title="GitHub泄露监控:"></a><strong>GitHub泄露监控</strong>:</h2><ul>
<li>定期监控GitHub仓库，以检测是否错误地公开了敏感信息。</li>
<li>使用GitHub的搜索功能或专门的工具来检测泄露。</li>
</ul>
<h3 id="GITHUB-资源搜索："><a href="#GITHUB-资源搜索：" class="headerlink" title="GITHUB 资源搜索："></a>GITHUB 资源搜索：</h3><p>in:name test #仓库标题搜索含有关键字<br>in:descripton test #仓库描述搜索含有关键字<br>in:readme test #Readme 文件搜素含有关键字<br>stars:&gt;3000 test #stars 数量大于 3000 的搜索关键字<br>stars:1000…3000 test #stars 数量大于 1000 小于 3000 的搜索关键字 forks:&gt;1000 test</p>
<p><strong>forks 数量大于 1000 的搜索关键字</strong><br>forks:1000…3000 test #forks 数量大于 1000 小于 3000 的搜索关键字 size:&gt;&#x3D;5000 test<br>#指定仓库大于 5000k(5M)的搜索关键字 pushed:&gt;2019-02-12 test #发布时间大于 2019-02-12 的<br>搜索关键字 created:&gt;2019-02-12 test #创建时间大于 2019-02-12 的搜索关键字 user:test<br>#用户名搜素<br>license:apache-2.0 test #明确仓库的 LICENSE 搜索关键字 language:java test #在 java 语<br>言的代码中搜索关键字<br>user:test in:name test #组合搜索,用户名 test 的标题含有 test 的</p>
<p><strong>关键字配合谷歌搜索：</strong><br>site:Github.com smtp<br>site:Github.com smtp @qq.com<br>site:Github.com smtp @126.com<br>site:Github.com smtp @163.com<br>site:Github.com smtp @sina.com.cn<br>site:Github.com smtp password<br>site:Github.com String password smtp</p>
<h1 id="CDN绕过"><a href="#CDN绕过" class="headerlink" title="CDN绕过"></a>CDN绕过</h1><h2 id="CDN工作原理："><a href="#CDN工作原理：" class="headerlink" title="CDN工作原理："></a><strong>CDN工作原理</strong>：</h2><ul>
<li>传统访问：用户请求域名，解析至真实服务器IP，访问目标主机。</li>
<li>普通CDN：用户请求域名，经过CDN节点访问真实服务器IP，再访问目标主机。</li>
<li>CDN（带WAF）：包含Web应用防火墙的CDN，同样会经过CDN节点访问真实服务器IP，再访问目标主机。</li>
</ul>
<h2 id="CDN配置："><a href="#CDN配置：" class="headerlink" title="CDN配置："></a><strong>CDN配置</strong>：</h2><h3 id="加速域名：单个或多个域名进行CDN加速。"><a href="#加速域名：单个或多个域名进行CDN加速。" class="headerlink" title="加速域名：单个或多个域名进行CDN加速。"></a>加速域名：单个或多个域名进行CDN加速。</h3><p><strong>1，有些网站只加速主域名，可以去找他的子域名</strong></p>
<p>只加速<a target="_blank" rel="noopener" href="http://www.yansiqi.com/">www.yansiqi.com</a>   </p>
<p>那么下面的test.yansiqi.com就没有加速，可以找test.yansiqi.com的真实ip</p>
<p><strong>一般子域名极有可能和主站保持同一个IP</strong></p>
<p>*.yansiqi.com 所有子域名都加速</p>
<p><strong>2，加速区域：指定需要加速的地区。</strong></p>
<p>有些厂商只加速常用的区域，一些偏远地区没有加载</p>
<p>比如在中国的厂商，有些只加速了亚洲</p>
<p>可以从非洲、东南亚等一下偏远地区平</p>
<p><strong>3，加速类型：确定需要加速的资源。</strong></p>
<p>有些厂商只加速一些资源</p>
<h2 id="判定标准"><a href="#判定标准" class="headerlink" title="判定标准"></a>判定标准</h2><ul>
<li>nslookup和ping：可查看是否有多个IP地址，以判断是否启用CDN服务。</li>
<li>CDN寻找网站真实IP：可通过一系列手段来尝试获取网站的真实IP地址。</li>
</ul>
<h2 id="获取真实IP的方法："><a href="#获取真实IP的方法：" class="headerlink" title="获取真实IP的方法："></a>获取真实IP的方法：</h2><h3 id="1，利用网站漏洞"><a href="#1，利用网站漏洞" class="headerlink" title="1，利用网站漏洞"></a>1，利用网站漏洞</h3><p>如phpinfo敏感信息泄露，Apache status 和boss status敏感信息泄露，网页源代码泄露，svn信息泄露，github信息泄露</p>
<p>若存在web漏洞，服务器主动与我们发起请求连接，我们也能获取目标站点的真实ip,列入xss,命令行执行反弹shell</p>
<h3 id="2，历史DNS记录查询"><a href="#2，历史DNS记录查询" class="headerlink" title="2，历史DNS记录查询"></a>2，历史DNS记录查询</h3><p>查询ip和域名绑定历史记录，可能会发现使用CDN之前的目标IP</p>
<p>查询网站有</p>
<p>x.threatbook.cn</p>
<p>toolbar.netcraft.com</p>
<p>viewdns.info</p>
<p><a target="_blank" rel="noopener" href="http://www.17ce.com/">www.17ce.com</a></p>
<p>community.riskiq.com</p>
<p><a target="_blank" rel="noopener" href="http://www.crimeflare.com/">www.crimeflare.com</a></p>
<h3 id="3，国外请求"><a href="#3，国外请求" class="headerlink" title="3，国外请求"></a>3，国外请求</h3><p>通过国外的一些冷门的DNS或者IP去请求目标，很多时候国内的CDN对国外的覆盖面并不是很广，可以利用此特点进行检测，通过国外代理访问就可以查看真实的ip地址，或者说，通过国外的DNS解析，可能就能得到真实的IP</p>
<p>查询网站：</p>
<p>asm.ca.com&#x2F;en&#x2F;ping.php</p>
<h3 id="4，扫描探测"><a href="#4，扫描探测" class="headerlink" title="4，扫描探测"></a>4，扫描探测</h3><p>过信息收集，缩小扫面范围，确定一个相对小的ip 和端口范围（中国？AS号？B段？等）</p>
<p>通过http指纹特征和keyword等做综合判断，可以用下面的工具</p>
<p>github.com&#x2F;zmp&#x2F;zgrab&#x2F;</p>
<p><a target="_blank" rel="noopener" href="http://www.ipdeny.com/ipblock">www.ipdeny.com/ipblock</a></p>
<h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><h3 id="漏洞-遗留文件"><a href="#漏洞-遗留文件" class="headerlink" title="漏洞&amp;遗留文件"></a>漏洞&amp;遗留文件</h3><p>ping或者请求网站 主动请求的，所以是CDN节点  (类似正向shell)</p>
<p>目标服务器去请求你设置的资源 ，所以是真实ip   (类似反向shell)</p>
<p>srf漏洞：可以通过请求来获取真实的IP，在目标主机访问主机</p>
<p>47.94.236.117（服务器）开设了web服务，记录日志</p>
<p><a target="_blank" rel="noopener" href="http://www.ansiqi.com/">www.ansiqi.com</a> srf漏洞会接受用户的数据并利用服务器去请求</p>
<p>漏洞请求47.94.236.117</p>
<p>日志就会记录访问的ip,访问的服务器IP</p>
<h3 id="子域名查询操作"><a href="#子域名查询操作" class="headerlink" title="子域名查询操作"></a>子域名查询操作</h3><p><a target="_blank" rel="noopener" href="http://www.sp910.com/">www.sp910.com</a></p>
<p>假如设置的加速域名是：<a target="_blank" rel="noopener" href="http://www.sp910.com/">www.sp910.com</a></p>
<p>我们可以去访问其他域名：sp910.com</p>
<h3 id="主动邮件配合备案"><a href="#主动邮件配合备案" class="headerlink" title="主动邮件配合备案"></a>主动邮件配合备案</h3><p>和srf漏洞有原理差不多</p>
<p>很多站点的邮件系统都是在内部的，没有通过cdn的解析，可在邮件源码里卖弄就会包含服务器的真实ip</p>
<p><a target="_blank" rel="noopener" href="http://www.mozhe.cn/">www.mozhe.cn</a> 忘记密码，发送邮寄到自己的邮箱</p>
<p>打开邮件显示内容原文，received里面有ip</p>
<p>当邮件和接口查询ip不一致，看备案信息，备案信息有真实ip所在地，根据地址确定真实ip</p>
<h3 id="全网扫描fuckCDN"><a href="#全网扫描fuckCDN" class="headerlink" title="全网扫描fuckCDN"></a>全网扫描fuckCDN</h3><p>有fuckcdn，和zmap</p>
<h3 id="HOSTS绑定指向访问"><a href="#HOSTS绑定指向访问" class="headerlink" title="HOSTS绑定指向访问"></a>HOSTS绑定指向访问</h3><p>当你扫描到ip地址后，windows可以在host文件里面，linux在&#x2F;etc&#x2F;hosts里面修改文件，解析真实的ip地址，后期测试流量会直接进入真实IP，就不会是cdn节点</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">Ys1</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/01/07/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%861/">http://example.com/2024/01/07/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%861/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/wallhaven-exrvrl_3840x2160-17046999802731.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/01/07/WAF%E5%AE%89%E5%85%A8%E7%8B%97%E5%AD%A6%E4%B9%A01/" title="WAF安全狗"><img class="cover" src="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/wallhaven-jxroqw_3840x2160-17047000418652.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">WAF安全狗</div></div></a></div><div class="next-post pull-right"><a href="/2023/12/16/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="python学习笔记"><img class="cover" src="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/113859340_p0_master1200.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next</div><div class="next_info">python学习笔记</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/IMG_3964.PNG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Ys1</div><div class="author-info__description">总是走走停停</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF"><span class="toc-number">1.</span> <span class="toc-text">信息收集基本信息</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E4%BA%A7%E6%9E%B6%E6%9E%84"><span class="toc-number">1.1.</span> <span class="toc-text">资产架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E5%8D%95%E4%B8%AA%E6%BA%90%E7%A0%81%E6%8C%87%E5%90%91%E5%AE%89%E5%85%A8"><span class="toc-number">1.1.1.</span> <span class="toc-text">web单个源码指向安全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E5%A4%9A%E4%B8%AA%E7%9B%AE%E5%BD%95%E6%BA%90%E7%A0%81%E5%AE%89%E5%85%A8"><span class="toc-number">1.1.2.</span> <span class="toc-text">web多个目录源码安全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E5%A4%9A%E4%B8%AA%E7%AB%AF%E5%8F%A3%E6%BA%90%E7%A0%81%E5%AE%89%E5%85%A8"><span class="toc-number">1.1.3.</span> <span class="toc-text">web多个端口源码安全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E8%AE%BE%E5%A4%9A%E4%B8%AA%E7%AB%99%E7%82%B9%E5%AE%89%E5%85%A8"><span class="toc-number">1.1.4.</span> <span class="toc-text">服务器架设多个站点安全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%B6%E8%AE%BE%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8F%92%E4%BB%B6%E6%8E%A5%E5%8F%A3%E5%AE%89%E5%85%A8"><span class="toc-number">1.1.5.</span> <span class="toc-text">架设第三方插件接口安全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E8%AE%BE%E5%A4%9A%E4%B8%AA%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8"><span class="toc-number">1.1.6.</span> <span class="toc-text">服务器架设多个应用安全</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%95%AA%E5%A4%96%E5%AE%89%E5%85%A8"><span class="toc-number">1.2.</span> <span class="toc-text">番外安全</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E5%AE%89%E5%85%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">基于域名解析安全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9C%AC%E8%BA%AB%E5%AE%89%E5%85%A8"><span class="toc-number">1.2.2.</span> <span class="toc-text">基于服务器本身安全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%9C%8D%E5%8A%A1%E5%95%86%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8"><span class="toc-number">1.2.3.</span> <span class="toc-text">基于服务商信息安全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E7%AE%A1%E7%90%86%E4%B8%AA%E4%BA%BA%E7%9A%84%E5%AE%89%E5%85%A8"><span class="toc-number">1.2.4.</span> <span class="toc-text">基于管理个人的安全</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%80%83%E8%99%91%E9%98%BB%E7%A2%8D"><span class="toc-number">1.3.</span> <span class="toc-text">考虑阻碍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%BB%E7%A2%8D-%E7%AB%99%E5%BA%93%E5%88%86%E7%A6%BB"><span class="toc-number">1.3.1.</span> <span class="toc-text">阻碍-站库分离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%BB%E7%A2%8D-CDN%E5%8A%A0%E9%80%9F%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.3.2.</span> <span class="toc-text">阻碍-CDN加速服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%BB%E7%A2%8D-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.3.3.</span> <span class="toc-text">阻碍-负载均衡服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%BB%E7%A2%8D-WAF%E5%BA%94%E7%94%A8%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">1.3.4.</span> <span class="toc-text">阻碍-WAF应用防火墙</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%BB%E7%A2%8D-%E4%B8%BB%E6%9C%BA%E9%98%B2%E6%8A%A4%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">1.3.5.</span> <span class="toc-text">阻碍-主机防护防火墙</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%BD%91web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.4.</span> <span class="toc-text">内网web服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.1.</span> <span class="toc-text">内网服务器原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E4%BA%8E%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.2.</span> <span class="toc-text">用于安全测试的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.4.3.</span> <span class="toc-text">注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86"><span class="toc-number">1.4.4.</span> <span class="toc-text">反向代理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%89%93%E7%82%B9"><span class="toc-number">2.</span> <span class="toc-text">信息打点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#web%E6%9E%B6%E6%9E%84-%E8%AF%AD%E8%A8%80-%E4%B8%AD%E9%97%B4%E4%BB%B6-%E6%95%B0%E6%8D%AE%E5%BA%93-%E7%B3%BB%E7%BB%9F%E7%AD%89"><span class="toc-number">2.1.</span> <span class="toc-text">web架构-语言&amp;中间件&amp;数据库&amp;系统等</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%B6%E9%9B%86%E4%BF%A1%E6%81%AF%E5%90%8E%E7%9A%84%E5%88%A4%E6%96%AD"><span class="toc-number">2.2.</span> <span class="toc-text">收集信息后的判断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web%E6%BA%90%E7%A0%81%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%8E%B7%E5%8F%96%E4%B8%8E%E7%89%B9%E5%BE%81"><span class="toc-number">2.3.</span> <span class="toc-text">Web源码类型的获取与特征</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web%E6%BA%90%E7%A0%81%E8%8E%B7%E5%8F%96%E3%80%81%E6%B3%84%E9%9C%B2%E4%B8%8E%E7%9B%91%E6%8E%A7"><span class="toc-number">2.4.</span> <span class="toc-text">Web源码获取、泄露与监控</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web%E5%9F%9F%E5%90%8D%E7%9A%84%E5%88%86%E6%9E%90"><span class="toc-number">2.5.</span> <span class="toc-text">Web域名的分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E7%82%B9%E5%92%8C%E6%8A%80%E6%9C%AF%E7%82%B9"><span class="toc-number">2.6.</span> <span class="toc-text">信息点和技术点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B5%84%E4%BA%A7%E6%B3%84%E9%9C%B2"><span class="toc-number">3.</span> <span class="toc-text">资产泄露</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#CMS%E8%AF%86%E5%88%AB"><span class="toc-number">3.1.</span> <span class="toc-text">CMS识别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E6%B3%84%E9%9C%B2"><span class="toc-number">3.2.</span> <span class="toc-text">备份文件泄露</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GIT%E6%B3%84%E9%9C%B2"><span class="toc-number">3.3.</span> <span class="toc-text">GIT泄露</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SVN%E6%B3%84%E9%9C%B2"><span class="toc-number">3.4.</span> <span class="toc-text">SVN泄露</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DS-store%E6%B3%84%E9%9C%B2"><span class="toc-number">3.5.</span> <span class="toc-text">DS_store泄露:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#composer-json%E6%B3%84%E9%9C%B2"><span class="toc-number">3.6.</span> <span class="toc-text">composer.json泄露:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WEB-INF%E6%B3%84%E9%9C%B2"><span class="toc-number">3.7.</span> <span class="toc-text">WEB-INF泄露:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GitHub%E6%B3%84%E9%9C%B2%E7%9B%91%E6%8E%A7"><span class="toc-number">3.8.</span> <span class="toc-text">GitHub泄露监控:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GITHUB-%E8%B5%84%E6%BA%90%E6%90%9C%E7%B4%A2%EF%BC%9A"><span class="toc-number">3.8.1.</span> <span class="toc-text">GITHUB 资源搜索：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CDN%E7%BB%95%E8%BF%87"><span class="toc-number">4.</span> <span class="toc-text">CDN绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#CDN%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">4.1.</span> <span class="toc-text">CDN工作原理：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CDN%E9%85%8D%E7%BD%AE%EF%BC%9A"><span class="toc-number">4.2.</span> <span class="toc-text">CDN配置：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E9%80%9F%E5%9F%9F%E5%90%8D%EF%BC%9A%E5%8D%95%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E5%9F%9F%E5%90%8D%E8%BF%9B%E8%A1%8CCDN%E5%8A%A0%E9%80%9F%E3%80%82"><span class="toc-number">4.2.1.</span> <span class="toc-text">加速域名：单个或多个域名进行CDN加速。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A4%E5%AE%9A%E6%A0%87%E5%87%86"><span class="toc-number">4.3.</span> <span class="toc-text">判定标准</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%9C%9F%E5%AE%9EIP%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">4.4.</span> <span class="toc-text">获取真实IP的方法：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%8C%E5%88%A9%E7%94%A8%E7%BD%91%E7%AB%99%E6%BC%8F%E6%B4%9E"><span class="toc-number">4.4.1.</span> <span class="toc-text">1，利用网站漏洞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%8C%E5%8E%86%E5%8F%B2DNS%E8%AE%B0%E5%BD%95%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.4.2.</span> <span class="toc-text">2，历史DNS记录查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%8C%E5%9B%BD%E5%A4%96%E8%AF%B7%E6%B1%82"><span class="toc-number">4.4.3.</span> <span class="toc-text">3，国外请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%8C%E6%89%AB%E6%8F%8F%E6%8E%A2%E6%B5%8B"><span class="toc-number">4.4.4.</span> <span class="toc-text">4，扫描探测</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">4.5.</span> <span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E-%E9%81%97%E7%95%99%E6%96%87%E4%BB%B6"><span class="toc-number">4.5.1.</span> <span class="toc-text">漏洞&amp;遗留文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C"><span class="toc-number">4.5.2.</span> <span class="toc-text">子域名查询操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E5%8A%A8%E9%82%AE%E4%BB%B6%E9%85%8D%E5%90%88%E5%A4%87%E6%A1%88"><span class="toc-number">4.5.3.</span> <span class="toc-text">主动邮件配合备案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E7%BD%91%E6%89%AB%E6%8F%8FfuckCDN"><span class="toc-number">4.5.4.</span> <span class="toc-text">全网扫描fuckCDN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HOSTS%E7%BB%91%E5%AE%9A%E6%8C%87%E5%90%91%E8%AE%BF%E9%97%AE"><span class="toc-number">4.5.5.</span> <span class="toc-text">HOSTS绑定指向访问</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/01/08/%E6%94%AF%E4%BB%98%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E/" title="支付逻辑漏洞"><img src="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/wallhaven-exrvrl_3840x2160-17047021086627.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="支付逻辑漏洞"/></a><div class="content"><a class="title" href="/2024/01/08/%E6%94%AF%E4%BB%98%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E/" title="支付逻辑漏洞">支付逻辑漏洞</a><time datetime="2024-01-08T07:38:23.000Z" title="Created 2024-01-08 15:38:23">2024-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/08/pikachu%E9%9D%B6%E5%9C%BA/" title="pikachu靶场"><img src="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/wallhaven-4owl2m_3840x2160.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="pikachu靶场"/></a><div class="content"><a class="title" href="/2024/01/08/pikachu%E9%9D%B6%E5%9C%BA/" title="pikachu靶场">pikachu靶场</a><time datetime="2024-01-08T02:32:12.000Z" title="Created 2024-01-08 10:32:12">2024-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/08/%E5%B0%8F%E7%B1%B3%E8%8C%83-nmap-dirsearch/" title="小米范+nmap+dirsearch"><img src="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/wallhaven-yxw3kx_3840x2160-17047001580696.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="小米范+nmap+dirsearch"/></a><div class="content"><a class="title" href="/2024/01/08/%E5%B0%8F%E7%B1%B3%E8%8C%83-nmap-dirsearch/" title="小米范+nmap+dirsearch">小米范+nmap+dirsearch</a><time datetime="2024-01-08T02:02:10.000Z" title="Created 2024-01-08 10:02:10">2024-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/08/sql%E6%B3%A8%E5%85%A5/" title="sql注入"><img src="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/wallhaven-vq319l_3840x2160-17047001031424.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="sql注入"/></a><div class="content"><a class="title" href="/2024/01/08/sql%E6%B3%A8%E5%85%A5/" title="sql注入">sql注入</a><time datetime="2024-01-08T01:27:59.000Z" title="Created 2024-01-08 09:27:59">2024-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/08/sql-labs%E8%AE%B0%E5%BD%95/" title="sql-labs记录"><img src="https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/wallhaven-x6wkov_3840x2160-17047001304775.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="sql-labs记录"/></a><div class="content"><a class="title" href="/2024/01/08/sql-labs%E8%AE%B0%E5%BD%95/" title="sql-labs记录">sql-labs记录</a><time datetime="2024-01-08T01:27:48.000Z" title="Created 2024-01-08 09:27:48">2024-01-08</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://raw.githubusercontent.com/yaoshoulong/tuchuang/main/img/wallhaven-exrvrl_3840x2160-17046999802731.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Ys1</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax src="https://npm.elemecdn.com/oh-my-live2d@0.3.0/dist/index.min.js"></script><script>
OML2D.loadOhMyLive2D({
  source:"",
  mobileShow:true,
  sayHello:false,
  transitionTime:1000,
  models:[{"scale":1.2,"path":"/live2d-model-xiaohei/黑崽生日快乐2023.model3.json","x":0,"y":0,"stageStyle":{"backgroundColor":"rgba(0, 0, 0, 0)","width":"auto","height":"auto"}}],
  tips:{
    style:{"width":230,"height":120,"offsetX":0,"offsetY":90},
    
    
    idleTips:{
      
      
      interval:15000,
      
      remote:function() {
  return new Promise((resolve, reject) => {
    $.ajax({
      type: 'get',
      url: 'https://v1.hitokoto.cn?c=i',
      dataType: 'json',
      success: res => {
       // console.log(res);
        resolve({text: res.hitokoto});
      }
    });
  });
}
,
    }
  }
  });
  </script><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu@1.1.6/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var qweather_key = '89e20fa7d8a94689bb2358c9a0e8d3b8';
  var gaud_map_key = 'c0850013c190a07f2096da52e898c417';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '112.6534116,27.96920845';
  var clock_default_rectangle_enable = 'true';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu@1.1.6/lib/clock.min.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/unitychan.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>